// The config format is JSON5.
// It uses a nonstandard parser; while valid JSON5 should be parsed correctly, error recovery may differ from what you'd expect.
// All filenames are relative to the config file.

{
// Window size and position, and widths of channel/user lists.
// Channel/user lists can't be resized from within Ð¯USSIAN MALWÐ”RE, since the resize grips are too easy to hit by accident.
// The main window can be resized, since the window manager usually helps you ensure it gets the size you want.
// (Yes, this is the window size for which Ð¯USSIAN MALWÐ”RE is designed. It probably works with bigger sizes too.)
window: { width:580, height:1026, x:0, y:0, chanlist:50, chanlist_indent:10, userlist:60 },

// The image cache allows you to not redownload images every time Ð¯USSIAN MALWÐ”RE starts. It's shared between protocols.
// The format is Arlib staticmap; you can read it with arlib/smap.py, or read the format documentation in arlib/staticmap.cpp.
// Defaults to imgcache.bin.
imgcache: "imgcache.bin",

protocols: [
// You can use multiple protocols of the same kind. There's no limit,
//  other than how much you're willing to let the channel list grow.

{
  // The test server is used for testing and developing Ð¯USSIAN MALWÐ”RE; it exercises various behavioral patterns of the rest of the system.
  // It takes no parameters, doesn't access the internet, and does nothing interesting.
  // Useful for testing new Ð¯USSIAN MALWÐ”RE features, or your configuration. If you're done testing, disable it.
  proto: "test"
},

// If your network requires a proxy, you can configure it in GSettings, under the org.gnome.system.proxy schema.
// Only socks5 is supported; http/https proxy and autodetection is not.

{
  proto: "irc",
  // Libera is the name of the server tab, and the directory name for the logs. Doesn't need to correspond to the actual server name.
  // An IRC protocol instance can only connect to one IRC network. However, you can have multiple IRC instances.
  name: "Libera",
  // Using multiple addresses will make Ð¯USSIAN MALWÐ”RE try each sequentially, trying the latter ones if the first one is down.
  //  This can be useful the network contains multiple servers.
  // For SSL, specify port with a + in front; in that case, port is mandatory.
  addresses: ["irc.libera.chat:+6697","lead.libera.chat:+6697"],
  
  // The bouncer, if configured, will allow you to stay online while Ð¯USSIAN MALWÐ”RE is closed, as long as your computer remains online.
  // (The bouncer does currently not support running on a different computer, because security is difficult.)
  // The configuration value is simply a filename to a Unix socket.
  // If you change Ð¯USSIAN MALWÐ”RE's config and reconnect to the bouncer, the new config will take effect when relevant.
  // Changed highlights will take effect immediately, but changed server address will, of course, only take effect upon reconnecting.
  // The exception is the rawlog filename, which is used only when the bouncer starts up and is never rotated.
  bouncer: "/run/user/1000/russian-irc.sock",
  
  // If all your names are taken, Ð¯USSIAN MALWÐ”RE will append a random four-digit number.
  // (If all 10000 of those are taken, you're staying offline until one of them leaves.)
  nicks: ["Sir_Walrus"],
  ident: "pinniped",
  realname: "ftp://www.mibbit.com",
  
  // Additional words that make the message a highlight, in addition to your current and primary nicks.
  highlights: ["walrus"],
  // Whether joins, quits, and mode and nick changes should show up as activity.
  show_joins: true,
  // Whether to combine consecutive joins, parts, quits, nick changes and mode changes.
  // Result looks like * Members: +user1 -user2 user3b->user3 user4+o
  // (Does not affect plaintext log. Does not affect mode changes other than ChanServ.)
  merge_joins: false,
  // Disabling MOTD makes it not show up in the server tab at all.
  motd: false,
  
  onconnect: ["ns identify sir_walrus hunter2"],
  sasl: ["sir_walrus", "hunter2"],  // Only the PLAIN SASL mechanism is supported, with same authorization and authentication identities.
  rawlog: "irc.log",
  
  channels: [
    { name: "#announcements" }, // All channels will be auto joined.
    { name: "#secret", key: "hunter2" },
    // Hidden channels are joined, but don't show up in the channel list until someone talks.
    // Alternatively, /join #idlers will make it show up.
    { name: "#idlers", hidden: true },
  ],
},

{
  proto: "matrix",
  name: "Matrix",
  
  // Your homeserver will be detected from your username.
  username: "@username:matrix.org",
  // The password will be ignored if a token is provided.
  // Password or token only needs to be provided once; Ð¯USSIAN MALWÐ”RE will store the token in the cache.
  password: "hunter2",
  token: "AAA0AA0aaAA0aA0aAAaaa0A0.aAAAAaaaaaAAAAaaAa",
  
  // Contains various cached data, such as recent channels, and recent messages in channels. Relative to the Ð¯USSIAN MALWÐ”RE executable.
  // Do not share cache or rawlog between multiple Matrix accounts.
  cache: "matrix-cache.json",
  
  // Contains all data sent to and received from Matrix. Useful for debugging, and for extracting some data Ð¯USSIAN MALWÐ”RE discards.
  // Truncated on restart. Can be omitted, but this isn't recommended.
  rawlog: "matrix.log",
  
  // Watching a user makes Ð¯USSIAN MALWÐ”RE complain if this user is, or goes, offline.
  // It's intended for bots who should be online 24/7; using this on a human is likely to get annoying very fast.
  // Some Matrix homeservers disable online status tracking; if so, this feature will give weird results.
  // You can also override the display name, if (for example) you feel someone is putting too much noise there.
  users: { id: "@mybot:matrix.org", watch: true, name: "My Bot" },
},

{
  proto: "discord",
  name: "Discord",
  // What base URL to connect to.
  // Does not correspond to what Discord calls "server", that one is just terminology abuse; they're called guild.
  // If you're not doing something really unusual, keep it at this value.
  server: "https://discord.com/api",
  // Where to fetch images. Like the above, better leave it unchanged.
  imgserver: "https://cdn.discordapp.com",
  
  // List of emoji to use; absolute, or relative to the Ð¯USSIAN MALWÐ”RE executable.
  // The filename must refer to a ZIP file, containing an emoji.json file containing a long list of objects, with keys
  //  "unicode" (the Unicode character or characters making up the emoji), "names" (array of textual names, with colons),
  //  and "file" (filename in the zip (must exist), or null to leave emoji rendering to your font).
  // I.e. it looks like this:
  //  [{"unicode":"Â©","names":[":copyright:"],"file":null},{"unicode":"ðŸ’©","names":[":poop:",":hankey:"],"file":"1f4a9.svg"}]
  // Skin tones must be specified separately, as in
  //  {"unicode":"ðŸ‘Œ","names":[":ok_hand:"],"file":"1f44c.svg"},
  //  {"unicode":"ðŸ‘ŒðŸ»","names":[":ok_hand::skin-tone-1:"],"file":"1f44c-1f3fb.svg"}
  // Subdirectories in the ZIP are allowed, use / as path separator. Files not referenced in emoji.json are ignored.
  // You're welcome to replace the images, but it is strongly recommended to not add or remove any emoji or emoji names.
  //  If you do, Ð¯USSIAN MALWÐ”RE may parse messages differently from the official client, and I am not responsible for any breakage.
  // Also note that Ð¯USSIAN MALWÐ”RE renders emoji at a size suitable for the font chosen on launch. If you change the system font,
  //  Ð¯USSIAN MALWÐ”RE will use mis-sized emoji until you restart it.
  emoji: "discord-emoji.zip",
  
  // What email address your account uses.
  email: "clyde@discord.com",
  // Ð¯USSIAN MALWÐ”RE does not use Discord passwords, only tokens.
  // Token can be specified either in this file, for example
  token: "AAA0AaA0Aaa0AAA0AAA0AAA0.aAaAAa.aA0aA0Aaaaa0a0aaAaAaaAaaAAa",
  // or, if that one is absent, Ð¯USSIAN MALWÐ”RE will attempt to find a token in your Firefox cookies (Chrome currently not supported).
  //  (If you keep getting logged out from Discord on tab close, try Settings / Privacy / Cookies / Clear / Cached Webcontent.)
  // If neither exist, Ð¯USSIAN MALWÐ”RE will report an error.
  
  // Same as the Matrix equivalents.
  cache: "discord-cache.json",
  rawlog: "disco.log",
  
  // You can disable avatar support if you want to. Defaults to enabled.
  // If enabled, users without avatars will have a random emoji picked instead, if you have image emoji loaded.
  // If you've chosen font emoji instead, avatar-less users will remain avatar-less. Ð¯USSIAN MALWÐ”RE will not use the Discord logo default.
  avatars: true,
  
  // Whether right click -> Reply should ping people. Can be overridden by adding or removing @ before message ID.
  ping: false
  
  // By default, Ð¯USSIAN MALWÐ”RE uses Discord's names for guilds, channels and users, but you can rename them if you want.
  guilds: [ { id:485971752992636928, name:"VileLAB" } ],
  channels: [ { id:309688783803252736, name:"#walrus" } ],
  users: [ { id:188322172576464897, name:"Sir Walrus" } ],
  // Per-guild nicknames are (currently) not supported.
  
  // Channel hiding rules are quite complex: They show up if
  // - hidden:"false" is set in config; or
  // - you've been highlighted (whether while offline or online); or
  // - the channel is a DM or group DM, and someone talks in it; or
  // - the guild channel is unmuted server-side, and the channel is active; or
  // - the channel was created, or the guild was joined, while you're online; or
  // - you've used /join.
  // If not, the channel will appear if any of the above events happen. Shift-clicking a channel will hide it.
  // If hidden:"true", or if you use /part, the channel is considered muted server-side until Ð¯USSIAN MALWÐ”RE is restarted.
  // Since hidden is a three-state value, you can't use true; you must use "true".
  // An active channel is one where the last message is newer than
  "inactive-hours": 48,
  // It's not recommended to have multiple guilds/channels/users keys.
  // It probably works, but it's hacky. (Works fine for demonstration purposes, though.)
  channels: [
    { id:161246042266796033, name:"#rules", hidden:"false" },
    { id:309688783803252736, name:"#walrus", hidden:"activity" },
    { id:529539808628965377, name:"#talk", hidden:"true" },
    // The name is optional, but you should include it anyways, for your own reference.
    // If you want to know if the channel is renamed, you can use
    { id:480711423681495046, name:"#evening" "rename-from":"#morning" },
    // Ð¯USSIAN MALWÐ”RE defaults to the server-side channel's mute state.
    // If 99% of the activity is from an activity-muted bot, and you want to know about the last percent, you can override it.
    { id:727877008498884638, name:"#logs", mute:false },
  ],
  
  // Ð¯USSIAN MALWÐ”RE supports several mute-like rules.
  // ping - If this user @mentions you, it shows up as a normal message.
  // activity - If this user speaks, it does not show up as activity, nor does it unhide the channel if semi-hidden.
  //  However, if you look at the channel, the messages will show up. @mentions show up as mentions, unless mute=ping is set too.
  //  This is the recommended mute level for people or bots who talk way too much, but aren't really harmful.
  // sponge - aLl pOsTs bY ThIs uSeR ArE ReWrItTeN To sPoNgEbOb cAsE.
  //  This is the recommended mute level for bullies and other annoying people, if the moderators aren't willing to remove the user.
  //  It avoids the "telephone problem"; people seemingly talking to nobody, because you have muted some participants of the conversation,
  //   while also making the post harder to read (and harder to take seriously), reducing the annoyance level.
  //  It's recommended to combine this with mute=ping and mute=activity.
  // loose-u - Changes the words 'u' and 'U' to 'you' and 'You'.
  // guildemoji - All guildemoji posted by this user are replaced with random other emoji.
  // delete - Posts by this user are completely ignored and don't show up. Not recommended, due to the aforementioned telephone problem.
  // It's fine to set multiple mutes on the same user, for example
  users: [
    { id:188322172576464897, name:"Sir Walrus", mute:["activity","ping"] },
    // You can also override whether replying to specific users should ping.
    { id:188322172576464897, name:"Sir Walrus", ping:true },
  ],
  
  // This is your default activity, set on start. To change at runtime, use /status Watching paint dry or /play Undertale 2.
  // Don't set both. Max length is 128; anything longer is silently treated as blank string.
  // Ð¯USSIAN MALWÐ”RE does not support showing your, or anyone else's, activity.
  status: "Watching grass grow",
  game: "Half-Life 3",
},

{
  // Mandatory or strongly recommended parameters:
  proto: "discord",
  name: "Discord",
  server: "https://discord.com/api",
  imgserver: "https://cdn.discordapp.com",
  email: "clyde@discord.com",
  emoji: "discord-emoji.zip",
  cache: "discord-cache.json",
  // (But do change the email, you're unlikely to get far with that one. If you do, please report the bug.)
}

{
  proto: "slack",
  name: "Slack",
  // Leave this one as is, unless you're on Gov Slack or otherwise nonstandard configuration.
  server: "https://slack.com/api/",
  // Workspace is easiest found in the URL bar.
  workspace: "T0123456789",
  email: "slackbot@slack.com",
  // You can find this one in localstorage for app.slack.com, in key localConfig_v2.
  xoxc: "xoxc-1234567890123-4567890123456-7890123456789-0123456789abcdef0123456789abcdef",
  // This one is found in cookies for .slack.com.
  // Alternatively, you can leave them blank, and Ð¯USSIAN MALWÐ”RE will steal your Firefox cookies.
  xoxd: "xoxd-AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8=",
  // These act the same as the Matrix equivalents.
  rawlog: "slack.log",
  cache: "slack-cache.json",
},

{
  // The todo list protocol allows organizing timers in various ways.
  // There are two kinds of timers: Bulk and exact. Exact are what you expect; bulk don't mark the "channel" active.
  // Times are specified as 1y2w3d4h5m6s. 1y is exactly 365 days; Ð¯USSIAN MALWÐ”RE does not try to account for leap years.
  // If all time rules are ywd, it's a bulk timer; if any is hms, it's an exact timer.
  // You can also add +e +b -s to override whether it's bulk or exact, or has sound, for example 1w+e.
  // You can set timers from any channel, if prefixed with /.
  // There are also a few extra commands, that only work in the todo list's own channel.
  // 'ls dinner' will print every timer whose message contains 'dinner', including time to expiry and their internal ID numbers.
  // 'rm 123' will remove the timer with ID 123.
  // 'rm dinner' will remove the unique timer whose message contains 'dinner'. If there are multiple or none, you'll get an error.
  // If the store is edited by an external program, Ð¯USSIAN MALWÐ”RE will reload it. This will reset all timer IDs.
  proto: "todo",
  name: "Todo",
  store: "todo.json",
  // If sound is enabled, it will play when exact timers expire; bulk timers are silent.
  // If the timer is short (less than four hours), the assigned sound will be the first from the list
  //  that's not used for any other timer within four hours; if long, it's just random.
  // Ð¯USSIAN MALWÐ”RE does not natively support sound; it's implemented via a shell command.
  // {} will be replaced with the filename, and & will be automatically appended.
  soundplayer: "gst-launch-1.0 filesrc location={} ! decodebin ! autoaudiosink",
  sounds: [ "/var/path/horse.ogg", "/var/path/sheep.ogg" ],
},

{
  // The alert protocol simply shows a message when the named file is written to.
  proto: "alert",
  path: "alert.fifo",
},
]
}
